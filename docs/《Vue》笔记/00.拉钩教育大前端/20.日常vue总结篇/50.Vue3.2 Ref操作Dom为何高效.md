---
title: Vue3.2 Ref操作Dom为何高效
date: 2023-05-20 08:52:43
permalink: /pages/99468c/
categories:
  - 《Vue》笔记
  - 拉钩教育大前端
tags:
  - 
author: 
  name: citccld
  link: https://github.com/citccld
---
## Vue3.2 Ref操作Dom为何高效

> 就对Ref操作Dom的相关知识点以及应用实例分几个方面来做下剖析
>
> - Ref获取Dom的本质
> - Ref操作Dom在Vue2.x和Vue3.x的不同
> - Ref操作组件Dom和父子组件单向传递对比

### **Ref获取Dom的本质**

Vue2.x中Vue的对象属性$refs，其实就是所有注册过的ref的一个集合，而ref对应着template模版中，不同组件或普通Dom元素上关联的ref="xx"; 源码中ref的实际获取方式也是通过原生方式getElementById而得到的Dom节点； **可以说ref是`document.getElementById`的语法糖。vue3的ref延续了vue2的用法，还增加了一个作用就是创建响应式数据**，也许有人会问了，既然ref和getElementById都能获取到Dom，那么在项目开发中，我选择哪种方式都没什么区别呢？

关于这个问题，经过数据表明，$refs相对document.getElementById的方法，会减少获取dom节点的消耗；而具体原因，等下一篇文章再详细探讨。

### **Ref操作Dom在Vue2.x和Vue3.x的不同**

- Vue2.x

我们只需要在相应的Dom元素或者组件加上ref="xx"属性,然后在Vue对象中使用this.$refs.xx,就可以直接获取到该Dom并操作其方法属性,

```vue
<user-and-dep-tree-select-modal
  ref="avaUserTreeSelect"
  title="選擇可見範圍"
  :project-id="currentProjectId"
  :visible.sync="avaUserModalVisible"
  @ok="editAvailableUser"
/>
或者
<div class="user" ref="user">dd</div>
```

```js
// $refs
showManagerModal () {
  this.$refs.avaUserTreeSelect.showModal(this.form.managers)
  console.log(this.$refs.user.text)
},
```

- Vue3.2

```vue
//普通Dom
<div class="user" ref="user"></div>
//组件
<batch-adjust-department-modal ref="batchAdjustDepartmentRef" />
```

```js
<script setup lang="ts">
import { ref } from 'vue';
// modal调整部门弹层Dom
const batchAdjustDepartmentRef = ref(null);
const user = ref(null);
</script>
```





























